document.addEventListener("DOMContentLoaded",function(){let r=document.getElementById("paperSearch"),e=document.getElementById("clearSearch"),a=document.getElementById("searchResults"),o=document.querySelectorAll(".post-item"),n=document.querySelector(".all-papers-list"),c=document.createElement("div"),t=(c.className="no-results-message",c.innerHTML="No papers match your search criteria. Try different keywords.",c.style.display="none",n.after(c),document.querySelectorAll(".sort-button")),i={type:"title",direction:"desc"};function s(){var e=(()=>{let a=[];return o.forEach(e=>{var t=e.querySelector(".post-title").textContent.trim(),n=e.querySelector(".citation").textContent,r=n.match(/\((\d{4})\)/),r=r?parseInt(r[1]):0,n=n.match(/^([^,]+)/),n=n?n[1].trim():"";a.push({element:e,title:t,year:r,author:n})}),a})();let r=i.type,a=i.direction,t=(e.sort((e,t)=>{let n=0;return"title"===r?n=-e.title.localeCompare(t.title):"year"===r?n=e.year-t.year:"author"===r&&(n=-e.author.localeCompare(t.author)),"asc"===a?n:-n}),document.createDocumentFragment());e.forEach(e=>{t.appendChild(e.element)}),n.innerHTML="",n.appendChild(t)}function d(){t.forEach(e=>{e.getAttribute("data-sort")===i.type?(e.classList.add("active"),e.setAttribute("data-direction",i.direction)):(e.classList.remove("active"),e.removeAttribute("data-direction"))})}function l(){let t=r.value.trim().toLowerCase(),n=0;e.style.display=0<t.length?"block":"none",""===t?(o.forEach(e=>{e.classList.remove("hidden")}),a.textContent="",c.style.display="none"):(o.forEach(e=>{e.querySelector(".post-title").textContent.toLowerCase().includes(t)?(e.classList.remove("hidden"),n++):e.classList.add("hidden")}),0===n?(a.textContent="No papers found matching your search.",c.style.display="block"):(a.textContent=`Found ${n} paper${1!==n?"s":""} matching your search.`,c.style.display="none"))}s(),d(),t.forEach(e=>{e.addEventListener("click",function(){var e=this.getAttribute("data-sort");e===i.type?i.direction="asc"===i.direction?"desc":"asc":(i.type=e,i.direction="desc"),s(),d()})}),r.addEventListener("input",l),e.addEventListener("click",function(){r.value="",l(),r.focus()}),r.addEventListener("keydown",function(e){"Escape"===e.key&&(r.value="",l())})});